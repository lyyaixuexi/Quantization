export PYTHONPATH=$PYTHONPATH:/userhome/resnet18_fault_det/dmcp-master
 
#/userhome/anaconda3_1/envs/pytorch_wzb/bin/python  train_quantize.py  --mode train --data ../pcb  --config 'config/res18/retrain-pcb-stage3.yaml' --flops  1040  --chcfg './results/DMCPResNet18_1040.0_051312/model_sample/expected_ch' --model_path 'results/AdaptiveResNet18_1040.0_051315/best/best.pth'  --quantization  --quantization_bits 12 --m_bits 12 --bias_bits 32 --fuseBN 'stage1/int16/AdaptiveResNet18_1040.0_120514/best/best.pth'  --Mn_aware  --load_pretrain_fuseBN 'stage2/int16/AdaptiveResNet18_1040.0_120522/best/best.pth'  --save_dir './stage3/int16' >out_16bits_stage3.txt

#12/13
#/userhome/anaconda3_1/envs/pytorch_wzb/bin/python  train_quantize.py  --mode train --data ../pcb_3  --config 'config/res18/retrain-pcb-stage3-v3.yaml' --flops  1040  --chcfg './results/DMCPResNet18_1040.0_051312/model_sample/expected_ch' --model_path 'results/AdaptiveResNet18_1040.0_051315/best/best.pth'  --quantization  --quantization_bits 12 --m_bits 12 --bias_bits 32 --fuseBN 'stage1/int16/AdaptiveResNet18_1040.0_121312/best/best.pth'  --Mn_aware  --load_pretrain_fuseBN 'stage2/int16/AdaptiveResNet18_1040.0_121314/best/best.pth'  --save_dir './stage3/int16' >out_16bits_stage3.txt

#以下是在PCB 3类上的训练结果与目录
#12/12
/userhome/anaconda3_1/envs/pytorch_wzb/bin/python  train_quantize.py  --mode train --data ../pcb_3  --config 'config/res18/retrain-pcb-stage3-v3.yaml' --flops  1040  --chcfg './results/DMCPResNet18_1040.0_051312/model_sample/expected_ch' --model_path 'results/AdaptiveResNet18_1040.0_051315/best/best.pth'  --quantization  --quantization_bits 14 --m_bits 12 --bias_bits 32 --fuseBN 'stage1/int16/AdaptiveResNet18_1040.0_121219/best/best.pth'  --Mn_aware  --load_pretrain_fuseBN 'stage2/int16/AdaptiveResNet18_1040.0_121208/best/best.pth'  --save_dir './stage3/int16' >out_16bits_stage3.txt
#12/07
#/userhome/anaconda3_1/envs/pytorch_wzb/bin/python  train_quantize.py  --mode train --data ../pcb_3  --config 'config/res18/retrain-pcb-stage3-v2.yaml' --flops  1040  --chcfg './results/DMCPResNet18_1040.0_051312/model_sample/expected_ch' --model_path 'results/AdaptiveResNet18_1040.0_051315/best/best.pth'  --quantization  --quantization_bits 16 --m_bits 12 --bias_bits 32 --fuseBN 'stage1/int16/AdaptiveResNet18_1040.0_120715/best/best.pth'  --Mn_aware  --load_pretrain_fuseBN 'stage2/int16/AdaptiveResNet18_1040.0_120717/best/best.pth'  --save_dir './stage3/int16' >out_16bits_stage3.txt
#12/08
#以下是在PCB 7类上的训练结果与目录
#/userhome/anaconda3_1/envs/pytorch_wzb/bin/python  train_quantize.py  --mode train --data ../pcb  --config 'config/res18/retrain-pcb-stage3-v2.yaml' --flops  1040  --chcfg './results/DMCPResNet18_1040.0_051312/model_sample/expected_ch' --model_path 'results/AdaptiveResNet18_1040.0_051315/best/best.pth'  --quantization  --quantization_bits 12 --m_bits 12 --bias_bits 32 --fuseBN 'stage1/int16/AdaptiveResNet18_1040.0_120818/best/best.pth'  --Mn_aware  --load_pretrain_fuseBN 'stage2/int16/AdaptiveResNet18_1040.0_120820/best/best.pth'  --save_dir './stage3/int16' >out_16bits_stage3.txt

CUDA_VISIBLE_DEVICES=7 python train_quantize.py  --mode train --data ../pcb_3  --config config/res18/retrain-tsr-stage3-v3.yaml --flops  1040  --chcfg /mnt/cephfs/home/lyy/Quantization/dmcp/results/DMCPResNet18_1040.0_051312/model_sample/expected_ch --quantization  --quantization_bits 16 --m_bits 12 --bias_bits 32 --fuseBN /mnt/cephfs/home/lyy/Quantization/dmcp/stage1/int16/AdaptiveResNet18_1040.0_022215/best/best.pth  --Mn_aware  --load_pretrain_fuseBN /mnt/cephfs/home/lyy/Quantization/dmcp/stage2/int16/AdaptiveResNet18_1040.0_022602/best/best.pth  --save_dir './stage3/int16' >out_16bits_stage3.txt

CUDA_VISIBLE_DEVICES=4 python train_quantize.py  --mode evaluate --data ../pcb_3  --config config/res18/retrain-tsr-stage3-v3.yaml --flops  1040  --chcfg /mnt/cephfs/home/lyy/Quantization/dmcp/results/DMCPResNet18_1040.0_051312/model_sample/expected_ch --quantization  --quantization_bits 14 --m_bits 12 --bias_bits 32 --fuseBN /mnt/cephfs/home/lyy/Quantization/dmcp/stage1/int16/AdaptiveResNet18_1040.0_010219/best/best.pth  --Mn_aware  --load_pretrain_fuseBN /mnt/cephfs/home/lyy/Quantization/dmcp/stage2/int16/AdaptiveResNet18_1040.0_010412/best/best.pth  --save_dir './stage3/int16' >out_16bits_stage3.txt
